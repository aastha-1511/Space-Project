<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter</title>
    <style>
        body {
            background: url("th.jpg");
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Arial', sans-serif;
        }
        #startScreen {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            max-width: 80%;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        #startScreen ul {
            text-align: left;
            padding-left: 20px;
        }
        #startButton {
            background-color: #FFD700;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            cursor: pointer;
            margin-top: 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        #startButton:hover {
            background-color: #FFA500;
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 165, 0, 0.6);
        }
        #gameArea {
            display: none;
            position: relative;
            width: 100%;
            height: 100vh;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        #gameInfo {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            font-family: 'Arial', sans-serif;
            font-size: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
        #health, #score {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }
        #health {
            color: #ff4d4d;
        }
        #score {
            color: #4dff4d;
        }
    </style>
</head>
<body>
    <div id="startScreen">
        <h1>Space Shooter</h1>
        <h2>How to Play:</h2>
        <ul>
            <li>Move your mouse to control the spaceship</li>
            <li>Click to shoot bullets</li>
            <li>Destroy enemy ships to score points</li>
            <li>Collect health kits to restore health</li>
            <li>Avoid letting enemies pass you</li>
        </ul>
        <button id="startButton">Start Game</button>
    </div>
    <div id="gameArea">
        <canvas></canvas>
        <div id="gameInfo">
            <div id="health">Health: 100</div>
            <div id="score">Score: 0</div>
        </div>
    </div>
    <script>
        window.onload = function(){
            var startScreen = document.getElementById('startScreen');
            var startButton = document.getElementById('startButton');
            var gameArea = document.getElementById('gameArea');
            var canvas = document.querySelector("canvas");
            var c = canvas.getContext("2d");
            var healthDisplay = document.getElementById('health');
            var scoreDisplay = document.getElementById('score');

            var score, health, _bullets, _enemies, _healthkits, animationId;
            var enemyInterval, healthkitInterval, fireInterval;

            function resetGame() {
                startScreen.style.display = 'block';
                gameArea.style.display = 'none';
                score = 0;
                health = 100;
                _bullets = [];
                _enemies = [];
                _healthkits = [];
                healthDisplay.textContent = 'Health: 100';
                scoreDisplay.textContent = 'Score: 0';
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                clearInterval(enemyInterval);
                clearInterval(healthkitInterval);
                clearInterval(fireInterval);
            }

            startButton.addEventListener('click', function() {
                startScreen.style.display = 'none';
                gameArea.style.display = 'block';
                startGame();
            });

            function startGame(){
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                var mouse = {
                    x: innerWidth/2,
                    y: innerHeight-33
                };
                
                canvas.addEventListener("mousemove", function(event){
                    mouse.x = event.clientX;
                });

                var player_width = 32;
                var player_height = 32;
                var playerImg = new Image();
                score = 0;
                health = 100;
                playerImg.src = "https://image.ibb.co/dfbD1U/heroShip.png";
                
                _bullets = []; 
                var bullet_width = 6;
                var bullet_height = 8;
                var bullet_speed = 10;
            
                _enemies = []; 
                var enemyImg = new Image();
                enemyImg.src = "https://i.ibb.co/0YgHvmx/enemy-fotor-20230927153748.png"
                var enemy_width = 52;
                var enemy_height = 52;
            
                _healthkits = []; 
                var healthkitImg = new Image();
                healthkitImg.src = "https://image.ibb.co/gFvSEU/first_aid_kit.png";
                var healthkit_width = 32;
                var healthkit_height = 32;
                
                function Player(x, y, width, height){
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    
                    this.draw = function(){
                        c.drawImage(playerImg, mouse.x-player_width/2, canvas.height-player_height-10);
                    };
                    
                    this.update = function(){
                        this.draw();
                    };
                }
                
                function Bullet(x, y, width, height, speed){
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    this.speed = speed;
                    
                    this.draw = function(){
                        c.fillStyle = "white";
                        c.fillRect(this.x, this.y, this.width, this.height);
                    };
                    
                    this.update = function(){
                        this.y -= this.speed;
                        this.draw();
                    };
                }
                
                function Enemy(x, y, width, height, speed){
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    this.speed = speed;
                    
                    this.draw = function(){
                        c.drawImage(enemyImg, this.x, this.y);
                    };
                    
                    this.update = function(){
                        this.y += this.speed;
                        this.draw();
                    };
                }
                
                function Healthkit(x, y, width, height, speed){
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                    this.speed = speed;
                    
                    this.draw = function(){
                        c.drawImage(healthkitImg, this.x, this.y);
                    };
                    
                    this.update = function(){
                        this.y += this.speed;
                        this.draw();
                    };
                }
                  
                var __player = new Player(mouse.x, canvas.height-player_height-10, player_width, player_height);
                
                function drawEnemies(){
                    for (var _ = 0; _<4; _++){ 
                        var x = Math.random()*(canvas.width-enemy_width);
                        var y = -enemy_height; 
                        var speed = Math.random()*2 + 1;
                        var __enemy = new Enemy(x, y, enemy_width, enemy_height, speed);
                        _enemies.push(__enemy);
                    }
                }
                enemyInterval = setInterval(drawEnemies, 1234);
                  
                function drawHealthkits(){
                    for (var _ = 0; _<1; _++){   
                        var x = Math.random()*(canvas.width-healthkit_width);
                        var y = -healthkit_height; 
                        var speed = Math.random()*2.6 + 1;
                        var __healthkit = new Healthkit(x, y, healthkit_width, healthkit_height, speed);
                        _healthkits.push(__healthkit); 
                    }
                }
                healthkitInterval = setInterval(drawHealthkits, 15000);
            
                function fire(){ 
                    for (var _ = 0; _<1; _++){
                        var x = mouse.x-bullet_width/2;
                        var y = canvas.height-player_height-10;
                        var __bullet = new Bullet(x, y, bullet_width, bullet_height, bullet_speed);
                        _bullets.push(__bullet);
                    }
                }
                fireInterval = setInterval(fire, 200);
                  
                function collision(a,b){
                    return a.x < b.x + b.width &&
                           a.x + a.width > b.x &&
                           a.y < b.y + b.height &&
                           a.y + a.height > b.y;
                }

                function animate(){
                    animationId = requestAnimationFrame(animate);
                    c.clearRect(0, 0, canvas.width, canvas.height);
                    
                    healthDisplay.textContent = `Health: ${health}`;
                    scoreDisplay.textContent = `Score: ${score}`;
                    
                    __player.update();
            
                    for (var i=0; i < _bullets.length; i++){
                        _bullets[i].update();
                        if (_bullets[i].y < 0){
                            _bullets.splice(i, 1);
                        }
                    }
            
                    for (var k=0; k < _enemies.length; k++){
                        _enemies[k].update();
                        if(_enemies[k].y > canvas.height){
                            _enemies.splice(k, 1);
                            health -= 10;
                            if(health <= 0){
                                alert("You DIED!\nYour score was "+score);
                                resetGame();
                                return;
                            }
                        }
                    }
                
                    for(var j = _enemies.length-1; j >= 0; j--){
                        for(var l = _bullets.length-1; l >= 0; l--){
                            if(collision(_enemies[j], _bullets[l])){
                                _enemies.splice(j, 1);
                                _bullets.splice(l, 1);
                                score++;
                                break;
                            }
                        }
                    }
                    
                    for(var h=0; h < _healthkits.length; h++){
                        _healthkits[h].update();
                    }
                    for(var hh = _healthkits.length-1; hh >= 0; hh--){
                        for(var hhh = _bullets.length-1; hhh >= 0; hhh--){
                            if(collision(_healthkits[hh], _bullets[hhh])){
                                _healthkits.splice(hh, 1);
                                _bullets.splice(hhh, 1);
                                health += 10;
                                break;
                            }
                        }
                    } 
                }
                animate();
            }

            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        };
    </script>
</body>
</html>